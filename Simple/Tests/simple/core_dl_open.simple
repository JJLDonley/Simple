import "Core.DL" as DL
import "IO"
extern ffi.simple_add_i32 : i32 (a : i32, b : i32)
extern ffi.simple_hello : string ()

main : i32 () {
  lib : i64 = DL.Open("Simple/Tests/ffi/libsimpleffi.so", ffi);
  sum : i32 = 0;
  msg : string = "";
  if lib == 0 {
    IO.println(DL.LastError())
    return 0
  }
  sum = lib.simple_add_i32(64, 64);
  IO.println(sum);
  msg = lib.simple_hello();
  IO.println(msg);
  DL.Close(lib)
  return 1
}
