import "Core.DL"

main : i32 () {
  zero : i64 = 0
  h : i64 = Core.DL.open("Simple/Tests/ffi/libsimpleffi.so")
  if h == zero {
    Core.DL.last_error()
    return 0
  }
  s : i64 = Core.DL.sym(h, "simple_add_i32")
  if s == zero {
    Core.DL.close(h)
    return 0
  }
  c : i32 = Core.DL.close(h)
  if c != 0 {
    return 0
  }
  return 1
}
