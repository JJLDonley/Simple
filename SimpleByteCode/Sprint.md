# Sprint Log - Simple VM

## 2026-01-29
- Created SBC design docs in `SimpleByteCode/` (headers, encoding, sections, metadata, opcodes, rules, debug, runtime).
- Implemented initial VM skeleton in `SimpleByteCode/vm/`.
- Added loader for SBC header/sections/tables.
- Added basic verifier (instruction boundary + simple stack checks).
- Added interpreter core with minimal opcode support (i32/bool, locals, calls, control flow).
- Added `build.sh` using g++ for local build.
- Added VM README.
- Added implementation plan `SimpleByteCode/Implementation.md`.
- Removed committed VM binary `SimpleByteCode/vm/bin/simplevm`.
- Expanded loader validation (section IDs, bounds, table index checks).
- Expanded verifier checks for locals/globals and call signature validation.
- Added VM test harness and initial bytecode test (CONST_I32 + ADD_I32).
- Updated build script to compile test binary.
- Added `SimpleByteCode/vm/.gitignore` to prevent committing built binaries.
- Implemented global storage in VM with LOAD_GLOBAL/STORE_GLOBAL support.
- Added global read/write test to the VM test harness.
- Updated VM build script to auto-run tests after build.
- Routed VM execution through verifier by default; added `--no-verify` option path.
- Implemented stack ops (POP/DUP/DUP2/SWAP/ROT) and small const variants (I8/I16/U8/U16).
- Added tests for DUP, SWAP, and ROT behaviors.
- Added full i32 comparison opcodes (EQ/NE/LT/LE/GT/GE) and branch coverage tests.
- Fixed comparison test to return i32 exit code instead of bool.
- Updated test harness to print per-test results.
- Added MOD_I32 opcode and tests for POP, DUP2, MOD, and boolean ops with branching.
- Added local load/store and loop execution tests; added JMP bounds checks.
- Added heap object scaffolding and reference opcodes (ConstNull/NewObject/IsNull/RefEq/RefNe) with tests.
- Added array opcodes (NEW_ARRAY/ARRAY_LEN/ARRAY_GET_I32/ARRAY_SET_I32) with VM support and tests.
- Added list opcodes (NEW_LIST/LIST_LEN/LIST_GET_I32/LIST_SET_I32/LIST_PUSH_I32/LIST_POP_I32) with VM support and tests.
- Fixed list and core test local-count mismatches after adding list support.
- Added string ops (CONST_STRING/STRING_LEN/STRING_CONCAT) with const pool support and tests.
- Added basic GC root marking/sweep pass and a GC smoke test.
- Added field ops (NEW_OBJECT/LOAD_FIELD/STORE_FIELD/TYPEOF) with tests and custom type/field tables.
- Fixed field test stack order for TYPEOF.
- Added verifier checks for object/field/string indices and a negative field-id verify test.
- Added verifier coverage for bad CONST_STRING indices.
- Added negative runtime tests for array bounds and list pop underflow.
- Added tests for ARRAY_LEN, LIST_LEN, and list overflow trapping.
- Added basic type-stack verification and a bad-type verifier test.
- Added CallCheck opcode and verifier/type-stack support for it.
- Added merge-point type validation and a bad-merge verifier test.
- Fixed verifier control-flow merge handling for non-fallthrough ops (JMP/RET/etc.).
- Added ConstU32/ConstChar support and debug/intrinsic op handling with tests for constants, debug no-ops, and intrinsic/syscall traps.
- Implemented CALL_INDIRECT and TAILCALL execution with verifier stack tracking and added multi-function tests.
- Added list insert/remove/clear and string get/slice opcodes with verifier checks, runtime support, and tests.
- Added trap tests for list insert/remove and string get/slice bounds errors.
- Added CALL_INDIRECT verify/trap tests for arg mismatch, bad function index, and invalid runtime function value.
- Added verifier rejection tests for CALL and TAILCALL arg-count mismatches.
- Added ConstI64/ConstU64/ConstF32/ConstF64 runtime handling with new tests.
- Added I64 arithmetic and comparison opcodes with verifier support and tests.
- Added F32/F64 arithmetic and comparison opcodes with verifier support and tests.
- Added CONST_I128/CONST_U128 handling via const pool blobs with verifier support and tests.
- Added numeric conversion opcodes (int/float) with verifier checks, runtime support, and tests.

## Notes
- This log must record every VM-related change going forward.
